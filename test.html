<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeilView</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet" />
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 0 0% 3.9%;
            --card: 0 0% 100%;
            --card-foreground: 0 0% 3.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 0 0% 3.9%;
            --primary: 262 52% 50%;
            --primary-foreground: 0 0% 98%;
            --secondary: 0 0% 96.1%;
            --secondary-foreground: 0 0% 9%;
            --muted: 0 0% 96.1%;
            --muted-foreground: 0 0% 45.1%;
            --accent: 88 100% 50%;
            --accent-foreground: 0 0% 3.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 0 0% 98%;
            --border: 0 0% 89.8%;
            --input: 0 0% 89.8%;
            --ring: 88 100% 50%;
            --radius: 0.5rem;
        }
        .dark {
            --background: 0 0% 13%;
            --foreground: 0 0% 98%;
            --card: 0 0% 16%;
            --card-foreground: 0 0% 98%;
            --popover: 0 0% 3.9%;
            --popover-foreground: 0 0% 98%;
            --primary: 262 52% 50%;
            --primary-foreground: 0 0% 98%;
            --secondary: 0 0% 14.9%;
            --secondary-foreground: 0 0% 98%;
            --muted: 0 0% 14.9%;
            --muted-foreground: 0 0% 63.9%;
            --accent: 88 100% 50%;
            --accent-foreground: 0 0% 3.9%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 0 0% 98%;
            --border: 0 0% 25%;
            --input: 0 0% 25%;
            --ring: 88 100% 50%;
        }
        body {
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            font-family: 'Inter', sans-serif;
        }
        .font-headline {
            font-family: 'Poppins', sans-serif;
        }
        .bg-background { background-color: hsl(var(--background)); }
        .text-foreground { color: hsl(var(--foreground)); }
        .bg-card { background-color: hsl(var(--card)); }
        .border-border { border-color: hsl(var(--border)); }
        .text-muted-foreground { color: hsl(var(--muted-foreground)); }
        .text-primary { color: hsl(var(--primary)); }
        .to-accent { --tw-gradient-to: hsl(var(--accent)); }
        .from-primary { --tw-gradient-from: hsl(var(--primary)); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
        .shadow-primary\/10 { box-shadow: 0 10px 15px -3px hsla(var(--primary), 0.1), 0 4px 6px -2px hsla(var(--primary), 0.1); }
        .focus\:border-primary:focus { border-color: hsl(var(--primary)); }
        .bg-card\/50 { background-color: hsla(var(--card), 0.5); }
        .bg-background\/50 { background-color: hsla(var(--background), 0.5); }
        
        /* ShadCN/UI Component Styles */
        .ui-input {
            display: flex;
            height: 2.5rem;
            width: 100%;
            border-radius: 0.375rem;
            border-width: 1px;
            border-color: hsl(var(--input));
            background-color: hsl(var(--background));
            padding-left: 0.75rem;
            padding-right: 0.75rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        .ui-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            height: 2.5rem;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .ui-button-default {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }
        .ui-button-outline {
            border: 1px solid hsl(var(--input));
            background-color: hsl(var(--background));
        }
        .ui-button-ghost {
            background-color: transparent;
        }
        .ui-tabs-list {
            display: inline-flex;
            height: 2.5rem;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            background-color: hsl(var(--muted));
            padding: 0.25rem;
            color: hsl(var(--muted-foreground));
        }
        .ui-tabs-trigger {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            border-radius: 0.25rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
        }
        .ui-tabs-trigger[data-state='active'] {
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
         .animate-spin {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        .ui-textarea {
            display: flex;
            min-height: 80px;
            width: 100%;
            border-radius: 0.375rem;
            border: 1px solid hsl(var(--input));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
        }
        .ui-select-trigger {
            display: flex;
            height: 2.5rem;
            width: 100%;
            align-items: center;
            justify-content: space-between;
            border-radius: 0.375rem;
            border: 1px solid hsl(var(--input));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Helper Components & Icons ---

        const Loader2 = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="animate-spin h-4 w-4 mr-2">
                <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
            </svg>
        );
        const PlayIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="0" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>;
        const PauseIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="0" strokeLinecap="round" strokeLinejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>;
        const VolumeIcons = {
            Muted: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>,
            Low: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>,
            High: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>,
        };
        const RewindIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon></svg>;
        const FastForwardIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon></svg>;
        const RepeatIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m17 2 4 4-4 4"/><path d="M3 11v-1a4 4 0 0 1 4-4h14"/><path d="m7 22-4-4 4-4"/><path d="M21 13v1a4 4 0 0 1-4 4H3"/></svg>;
        const Repeat1Icon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m17 2 4 4-4 4"/><path d="M3 11v-1a4 4 0 0 1 4-4h14"/><path d="m7 22-4-4 4-4"/><path d="M21 13v1a4 4 0 0 1-4 4H3"/><path d="M11 10h1v4"/></svg>;
        const MaximizeIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>;
        const LoopAIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 15.524 12.3 5.5l2.3 10.024"/><path d="m18 18-1.5-4.243"/><path d="M14.6 15.5h-5.2"/></svg>;
        const LoopBIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 18h2a4 4 0 0 0 4-4 4 4 0 0 0-4-4h-2v8Z"/><path d="M9 14.1v-4.2C9 8.627 9.627 8 10.5 8H13a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5H11"/></svg>;

        function formatTime(seconds) {
            if (isNaN(seconds) || seconds < 0) return '00:00';
            const totalSeconds = Math.floor(seconds);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const secs = totalSeconds % 60;
            const paddedMinutes = String(minutes).padStart(2, '0');
            const paddedSecs = String(secs).padStart(2, '0');
            if (hours > 0) {
                const paddedHours = String(hours).padStart(2, '0');
                return `${paddedHours}:${paddedMinutes}:${paddedSecs}`;
            }
            return `${paddedMinutes}:${paddedSecs}`;
        }
        
        // --- PlayerControls Component ---
        function PlayerControls({
          isPlaying, onPlayPause, currentTime, duration, onSeek, volume, onVolumeChange, isMuted, onMuteToggle,
          playbackRate, onPlaybackRateChange, onStep, loop, onSetLoop, onToggleLoop, onResetLoop, onFullscreen
        }) {
          const [showRates, setShowRates] = useState(false);
          const VolumeIcon = isMuted ? VolumeIcons.Muted : volume > 50 ? VolumeIcons.High : volume > 0 ? VolumeIcons.Low : VolumeIcons.Muted;

          return (
            <div className="absolute inset-0 flex flex-col justify-end p-4 bg-gradient-to-t from-black/80 via-black/30 to-transparent text-white">
              <div className="w-full flex items-center gap-2">
                <span className="text-xs font-mono w-14 text-center">{formatTime(currentTime)}</span>
                <input
                  type="range"
                  min="0"
                  max={duration}
                  value={currentTime}
                  onChange={(e) => onSeek(Number(e.target.value))}
                  className="w-full h-2 bg-gray-500/50 rounded-lg appearance-none cursor-pointer accent-purple-500"
                />
                <span className="text-xs font-mono w-14 text-center">{formatTime(duration)}</span>
              </div>
              <div className="flex justify-between items-center mt-2">
                <div className="flex items-center gap-2">
                  <button onClick={onPlayPause} className="p-2 hover:bg-white/10 rounded-full">{isPlaying ? <PauseIcon /> : <PlayIcon />}</button>
                  <div className="flex items-center group">
                    <button onClick={onMuteToggle} className="p-2 hover:bg-white/10 rounded-full"><VolumeIcon /></button>
                    <input type="range" min="0" max="100" value={isMuted ? 0 : volume} onChange={(e) => onVolumeChange(Number(e.target.value))} className="w-24 opacity-0 group-hover:opacity-100 transition-opacity accent-purple-500" />
                  </div>
                </div>
                <div className="flex items-center gap-2">
                   <button onClick={() => onStep(-5)} className="p-2 hover:bg-white/10 rounded-full"><RewindIcon /></button>
                   <div className="flex items-center gap-1">
                     <button onClick={() => onSetLoop('a')} className={`p-2 hover:bg-white/10 rounded-full ${loop.a !== null ? 'text-purple-400' : ''}`}><LoopAIcon /></button>
                     <button onClick={onToggleLoop} className={`p-2 hover:bg-white/10 rounded-full ${loop.active ? 'text-purple-400' : ''}`}>
                        { loop.active ? <Repeat1Icon /> : <RepeatIcon /> }
                     </button>
                     <button onClick={() => onSetLoop('b')} className={`p-2 hover:bg-white/10 rounded-full ${loop.b !== null ? 'text-purple-400' : ''}`}><LoopBIcon /></button>
                     {(loop.a !== null || loop.b !== null) && <button onClick={onResetLoop} className="text-xs px-2 hover:bg-white/10 rounded-md" >Reset</button>}
                   </div>
                   <button onClick={() => onStep(5)} className="p-2 hover:bg-white/10 rounded-full"><FastForwardIcon /></button>
                </div>
                <div className="flex items-center gap-2 relative">
                  <button onClick={() => setShowRates(!showRates)} className="font-mono w-20 p-2 hover:bg-white/10 rounded-md">{playbackRate}x</button>
                  {showRates && (
                    <div onMouseLeave={() => setShowRates(false)} className="absolute bottom-full right-0 mb-2 bg-black/80 rounded-md p-1">
                      {[0.5, 1, 1.5, 2].map(rate => (
                        <div key={rate} onClick={() => { onPlaybackRateChange(rate); setShowRates(false); }} className="px-4 py-1 hover:bg-white/20 cursor-pointer rounded">
                          {rate}x
                        </div>
                      ))}
                    </div>
                  )}
                  <button onClick={onFullscreen} className="p-2 hover:bg-white/10 rounded-full"><MaximizeIcon /></button>
                </div>
              </div>
            </div>
          );
        }

        // --- VideoPlayer Component ---
        function VideoPlayer({ videoId, onPlayerReady }) {
          const playerRef = useRef(null);
          const playerContainerRef = useRef(null);
          const [isReady, setIsReady] = useState(false);
          const [playerState, setPlayerState] = useState(-1);
          const [currentTime, setCurrentTime] = useState(0);
          const [duration, setDuration] = useState(0);
          const [volume, setVolume] = useState(100);
          const [isMuted, setIsMuted] = useState(false);
          const [playbackRate, setPlaybackRate] = useState(1);
          const [loop, setLoop] = useState({ a: null, b: null, active: false });
          const [controlsVisible, setControlsVisible] = useState(true);
          const hideControlsTimeout = useRef(null);

          useEffect(() => {
            const loadYouTubeAPI = () => {
                if (!window.YT) {
                    const tag = document.createElement('script');
                    tag.src = 'https://www.youtube.com/iframe_api';
                    document.head.appendChild(tag);
                    window.onYouTubeIframeAPIReady = createPlayer;
                } else {
                    createPlayer();
                }
            };

            const createPlayer = () => {
                if (playerRef.current) {
                    playerRef.current.destroy();
                }
                if (!document.getElementById(`youtube-player-${videoId}`)) return;

                const player = new window.YT.Player(`youtube-player-${videoId}`, {
                    videoId: videoId,
                    playerVars: { autoplay: 0, controls: 0, rel: 0, showinfo: 0, modestbranding: 1, disablekb: 1, iv_load_policy: 3 },
                    events: { onReady: onPlayerReadyEvent, onStateChange: onPlayerStateChangeEvent },
                });
                playerRef.current = player;
            };

            loadYouTubeAPI();
            
            return () => {
                if (playerRef.current) playerRef.current.destroy();
            };
          }, [videoId]);

          const onPlayerReadyEvent = (event) => {
            setIsReady(true);
            setDuration(event.target.getDuration());
            setVolume(event.target.getVolume());
            onPlayerReady(event.target);
            const iframe = event.target.getIframe();
            if (iframe) iframe.setAttribute('tabindex', '-1');
          };
          const onPlayerStateChangeEvent = (event) => {
            setPlayerState(event.data);
            if (event.data === window.YT.PlayerState.PLAYING) {
                setDuration(playerRef.current.getDuration());
            }
          };

          useEffect(() => {
            const interval = setInterval(() => {
                if (playerRef.current && playerRef.current.getCurrentTime) {
                    const newTime = playerRef.current.getCurrentTime();
                    setCurrentTime(newTime);
                    if (loop.active && loop.a !== null && loop.b !== null && newTime >= loop.b) {
                        playerRef.current.seekTo(loop.a, true);
                    }
                }
            }, 250);
            return () => clearInterval(interval);
          }, [loop]);

          const showControls = () => {
            if (hideControlsTimeout.current) clearTimeout(hideControlsTimeout.current);
            setControlsVisible(true);
            if(playerState === 1) { // is playing
                hideControlsTimeout.current = setTimeout(() => setControlsVisible(false), 3000);
            }
          };

          const handlePlayPause = () => playerState === 1 ? playerRef.current.pauseVideo() : playerRef.current.playVideo();
          const handleSeek = (time) => { setCurrentTime(time); playerRef.current.seekTo(time, true); };
          const handleVolumeChange = (newVolume) => { setVolume(newVolume); playerRef.current.setVolume(newVolume); if (newVolume > 0 && isMuted) setIsMuted(false); };
          const handleMuteToggle = () => { if (isMuted) { playerRef.current.unMute(); } else { playerRef.current.mute(); }; setIsMuted(!isMuted); };
          const handlePlaybackRateChange = (rate) => { setPlaybackRate(rate); playerRef.current.setPlaybackRate(rate); };
          const handleStep = (seconds) => playerRef.current.seekTo(currentTime + seconds, true);
          const handleSetLoop = (point) => { if (point === 'a') setLoop(l => ({ ...l, a: currentTime })); else setLoop(l => ({ ...l, b: currentTime })); };
          const toggleLoop = () => { if (loop.a !== null && loop.b !== null && loop.a < loop.b) setLoop(l => ({ ...l, active: !l.active })); };
          const resetLoop = () => setLoop({ a: null, b: null, active: false });
          const handleFullscreen = () => { if (playerContainerRef.current) document.fullscreenElement ? document.exitFullscreen() : playerContainerRef.current.requestFullscreen(); };

          return (
            <div ref={playerContainerRef} className="relative w-full h-full bg-black group" onMouseMove={showControls} onMouseLeave={() => { if(playerState === 1) setControlsVisible(false); }} onClick={handlePlayPause} onContextMenu={(e) => e.preventDefault()}>
                {!isReady && <div className="w-full h-full bg-gray-800 animate-pulse"></div>}
                <div id={`youtube-player-${videoId}`} className={isReady ? 'w-full h-full' : 'hidden'} style={{ pointerEvents: 'none' }} />
                <div className={`absolute inset-0 transition-opacity duration-300 ${controlsVisible ? 'opacity-100' : 'opacity-0'}`} onClick={(e) => e.stopPropagation()}>
                    {isReady && <PlayerControls isPlaying={playerState === 1} onPlayPause={handlePlayPause} currentTime={currentTime} duration={duration} onSeek={handleSeek} volume={volume} onVolumeChange={handleVolumeChange} isMuted={isMuted} onMuteToggle={handleMuteToggle} playbackRate={playbackRate} onPlaybackRateChange={handlePlaybackRateChange} onStep={handleStep} onSetLoop={handleSetLoop} onToggleLoop={toggleLoop} onResetLoop={resetLoop} loop={loop} onFullscreen={handleFullscreen} />}
                </div>
            </div>
          );
        }

        // --- EngagementTools Component ---
        function EngagementTools({ onTimestampClick }) {
            const [activeTab, setActiveTab] = useState('summary');

            const handleDisabledClick = () => {
                alert("This AI feature is not available in the static version of the app.");
            };
            
            return (
                <div className="h-full w-full flex flex-col bg-card/50 rounded-lg border border-border">
                    <div className="p-1 grid grid-cols-3 bg-muted rounded-t-lg">
                        <button onClick={() => setActiveTab('summary')} data-state={activeTab === 'summary' ? 'active' : ''} className="ui-tabs-trigger">Summary</button>
                        <button onClick={() => setActiveTab('stamps')} data-state={activeTab === 'stamps' ? 'active' : ''} className="ui-tabs-trigger">Timestamps</button>
                        <button onClick={() => setActiveTab('translate')} data-state={activeTab === 'translate' ? 'active' : ''} className="ui-tabs-trigger">Translate</button>
                    </div>
                    <div className="flex-grow min-h-0 overflow-y-auto p-4">
                        {activeTab === 'summary' && (
                            <div className="space-y-4">
                                <h3 className="font-headline text-lg">AI Video Summary</h3>
                                <p className="text-sm text-muted-foreground">Get a quick summary of the video content.</p>
                                <button onClick={handleDisabledClick} className="w-full ui-button ui-button-default opacity-50 cursor-not-allowed flex items-center justify-center">Generate Summary</button>
                            </div>
                        )}
                        {activeTab === 'stamps' && (
                            <div className="space-y-4">
                                <h3 className="font-headline text-lg">Suggest Timestamps</h3>
                                <p className="text-sm text-muted-foreground">Find relevant moments in the video based on keywords.</p>
                                <input placeholder="e.g., 'animation', 'tutorial'" className="ui-input" />
                                <button onClick={handleDisabledClick} className="w-full ui-button ui-button-default opacity-50 cursor-not-allowed">Suggest</button>
                            </div>
                        )}
                        {activeTab === 'translate' && (
                            <div className="space-y-4">
                                <h3 className="font-headline text-lg">Translate Content</h3>
                                <p className="text-sm text-muted-foreground">Translate the video's title and description.</p>
                                <select className="ui-select-trigger w-full">
                                    <option>Spanish</option>
                                    <option>French</option>
                                    <option>German</option>
                                    <option>Japanese</option>
                                    <option>Chinese</option>
                                </select>
                                <button onClick={handleDisabledClick} className="w-full ui-button ui-button-default opacity-50 cursor-not-allowed">Translate</button>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // --- Main App Component ---
        function App() {
            const [videoId, setVideoId] = useState('M7lc1UVf-VE');
            const [inputValue, setInputValue] = useState('M7lc1UVf-VE');
            const [player, setPlayer] = useState(null);

            const handleLoadVideo = () => {
                const videoIdMatch = inputValue.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
                if (videoIdMatch && videoIdMatch[1]) {
                    setVideoId(videoIdMatch[1]);
                } else if (inputValue.match(/^[a-zA-Z0-9_-]{11}$/)) {
                    setVideoId(inputValue);
                } else {
                    alert("Invalid YouTube URL or ID.");
                }
            };

            const seekTo = (time) => {
                if (player) {
                  player.seekTo(time, true);
                  player.playVideo();
                }
            };

            return (
                <main className="min-h-screen bg-background text-foreground flex flex-col items-center p-4 lg:p-8">
                    <div className="w-full max-w-7xl space-y-6">
                        <header className="text-center space-y-2">
                            <h1 className="text-4xl sm:text-5xl font-headline font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-accent">
                                VeilView
                            </h1>
                            <p className="text-muted-foreground max-w-2xl mx-auto">
                                A secure, customizable YouTube player. Paste a YouTube link or video ID to begin.
                            </p>
                        </header>
                        <div className="flex w-full max-w-lg mx-auto items-center space-x-2">
                            <input
                                type="text"
                                placeholder="Enter YouTube URL or Video ID"
                                value={inputValue}
                                onChange={(e) => setInputValue(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleLoadVideo()}
                                className="ui-input bg-card border-2 border-border focus:border-primary"
                            />
                            <button onClick={handleLoadVideo} className="ui-button ui-button-default">Load Video</button>
                        </div>
                        {videoId && (
                            <div className="w-full border-2 border-border shadow-2xl shadow-primary/10 rounded-lg bg-card p-2 sm:p-4">
                                <div className="w-full grid grid-cols-1 lg:grid-cols-12 gap-4">
                                    <div className="lg:col-span-8 xl:col-span-9 w-full aspect-video rounded-lg overflow-hidden bg-black flex items-center justify-center">
                                        <VideoPlayer videoId={videoId} onPlayerReady={setPlayer} />
                                    </div>
                                    <div className="lg:col-span-4 xl:col-span-3 h-[50vh] lg:h-auto">
                                        <EngagementTools onTimestampClick={seekTo} />
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </main>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>
